---
title: NumPy 数组创建
date: 2026-01-02
category: MachineLearning/Basic/numpy
tags:
  - Python
  - NumPy
description: 详解 NumPy 数组的多种创建方法，包括从列表创建、特殊数组、范围数组等
image: https://img.yumeko.site/file/blog/NumpyLearning.jpg
status: public
---

# 数组创建

## 学习目标

- 掌握各种创建 NumPy 数组的方法
- 理解不同创建方法的适用场景
- 学会创建特殊类型的数组

## 创建方法一览

| 方法                  | 说明                 | 示例                            |
| --------------------- | -------------------- | ------------------------------- |
| `np.array()`          | 从列表创建数组       | `np.array([1,2,3])`             |
| `np.zeros()`          | 创建全零数组         | `np.zeros((3,4))`               |
| `np.ones()`           | 创建全一数组         | `np.ones((2,3))`                |
| `np.eye()`            | 创建单位矩阵         | `np.eye(3)`                     |
| `np.full()`           | 创建填充指定值的数组 | `np.full((2,2), 7)`             |
| `np.arange()`         | 创建等差数列         | `np.arange(0, 10, 2)`           |
| `np.linspace()`       | 创建等间距数列       | `np.linspace(0, 1, 5)`          |
| `np.random.rand()`    | 创建 0-1 随机数组    | `np.random.rand(2,3)`           |
| `np.random.randint()` | 创建随机整数数组     | `np.random.randint(0,10,(3,3))` |

## 从列表创建 (np.array)

`np.array()` 是最基本的创建方法，可以把 Python 列表转换成 NumPy 数组。

```python
# 一维数组
arr_1d = np.array([1, 2, 3, 4, 5])
print(arr_1d)
```

**结果**：`[1 2 3 4 5]`

**注意**：NumPy 数组打印时元素之间没有逗号，这是区分它和 Python 列表的一个标志。

```python
# 二维数组
arr_2d = np.array([[1, 2, 3], [4, 5, 6]])
print(arr_2d)
```

**结果**：

```
[[1 2 3]
 [4 5 6]]
```

**原理**：传入嵌套列表，NumPy 会自动识别为二维数组。外层列表的每个元素代表一行。

```python
# 指定数据类型
arr_float = np.array([1, 2, 3], dtype=np.float64)
print(arr_float)
```

**结果**：`[1. 2. 3.]`

**说明**：注意数字后面的小数点，表示这是浮点数。`dtype` 参数可以强制指定数据类型。

### 参数说明

| 参数     | 说明                                      |
| -------- | ----------------------------------------- |
| `object` | 输入数据，可以是列表、元组等可迭代对象    |
| `dtype`  | 指定数据类型，如 `np.int32`、`np.float64` |
| `copy`   | 是否复制数据，默认 True                   |

## 特殊数组

### 全零数组 (np.zeros)

**使用场景**：初始化数组，准备后续填充数据；创建占位符数组。

```python
# 3x4 全零数组
arr = np.zeros((3, 4))
print(arr)
```

**结果**：

```
[[0. 0. 0. 0.]
 [0. 0. 0. 0.]
 [0. 0. 0. 0.]]
```

**注意**：参数是一个元组 `(3, 4)`，不是两个参数 `3, 4`。这是初学者常犯的错误。

```python
# 一维全零数组
np.zeros(5)  # 结果: [0. 0. 0. 0. 0.]

# 三维全零数组
np.zeros((2, 3, 4))  # 形状: 2个 3x4 的矩阵
```

### 全一数组 (np.ones)

**使用场景**：创建掩码数组、初始化权重等。

```python
# 2x3 全一数组
arr = np.ones((2, 3))
print(arr)
```

**结果**：

```
[[1. 1. 1.]
 [1. 1. 1.]]
```

```python
# 整数类型的全一数组
arr_int = np.ones(5, dtype=int)
print(arr_int)
```

**结果**：`[1 1 1 1 1]`

**说明**：默认是浮点数 `1.`，加上 `dtype=int` 可以创建整数数组 `1`。

### 单位矩阵 (np.eye)

**什么是单位矩阵？** 单位矩阵是对角线上全为 1，其他位置全为 0 的方阵。在线性代数中，任何矩阵乘以单位矩阵等于它自己（类似于数字乘以 1）。

```python
# 3x3 单位矩阵
arr = np.eye(3)
print(arr)
```

**结果**：

```
[[1. 0. 0.]
 [0. 1. 0.]
 [0. 0. 1.]]
```

```python
# 上对角线偏移 1
np.eye(3, k=1)
```

**结果**：

```
[[0. 1. 0.]
 [0. 0. 1.]
 [0. 0. 0.]]
```

**原理**：`k=1` 表示对角线向上移动 1 位，`k=-1` 表示向下移动。

### 填充数组 (np.full)

**使用场景**：需要用特定值初始化数组时。

```python
# 2x2 数组，全部填充 7
arr = np.full((2, 2), 7)
print(arr)
```

**结果**：

```
[[7 7]
 [7 7]]
```

```python
# 用 π 填充
arr_pi = np.full((3, 3), np.pi)
print(arr_pi)
```

**结果**：

```
[[3.14159265 3.14159265 3.14159265]
 [3.14159265 3.14159265 3.14159265]
 [3.14159265 3.14159265 3.14159265]]
```

## 序列数组

### 等差数列 (np.arange)

**原理**：类似 Python 的 `range()`，但返回的是 NumPy 数组，且支持浮点数。

```python
# 基本用法：0 到 9
arr = np.arange(10)
print(arr)
```

**结果**：`[0 1 2 3 4 5 6 7 8 9]`

```python
# 指定起点和终点
np.arange(1, 10)    # 结果: [1 2 3 4 5 6 7 8 9]

# 指定步长
np.arange(1, 10, 2) # 结果: [1 3 5 7 9]

# 倒序
np.arange(10, 0, -1) # 结果: [10 9 8 7 6 5 4 3 2 1]
```

**重要**：`arange` 不包含终点！`np.arange(1, 10)` 生成 1-9，不包含 10。

### 等间距数列 (np.linspace)

**原理**：指定起点、终点和元素个数，自动计算步长。

```python
# 0 到 1 之间的 5 个等间距点
arr = np.linspace(0, 1, 5)
print(arr)
```

**结果**：`[0.   0.25 0.5  0.75 1.  ]`

**计算过程**：

- 起点 0，终点 1
- 需要 5 个点
- 间隔 = (1-0) / (5-1) = 0.25
- 结果：0, 0.25, 0.5, 0.75, 1.0

```python
# 用于绑图的典型用法
x = np.linspace(0, 2*np.pi, 100)  # 0 到 2π 的 100 个点
```

**使用场景**：绑制平滑曲线时，用 `linspace` 创建 x 轴坐标点。

```python
# 不包含终点
np.linspace(0, 1, 5, endpoint=False)
```

**结果**：`[0.  0.2 0.4 0.6 0.8]`

> **arange vs linspace**：
>
> - `arange` 需要指定步长，可能会因浮点精度问题导致元素个数不确定
> - `linspace` 需要指定点数，元素个数精确可控
> - 绑图时推荐使用 `linspace`

## 随机数组

### 设置随机种子

**为什么要设置随机种子？** 让随机结果可复现。调试代码时，希望每次运行得到相同的"随机"数据。

```python
np.random.seed(42)  # 42 是一个常用的种子值
```

**原理**：计算机生成的是"伪随机数"，由种子值决定随机序列。相同的种子产生相同的随机数序列。

### 均匀分布

```python
np.random.seed(42)
arr = np.random.rand(2, 3)
print(arr)
```

**结果**：

```
[[0.37454012 0.95071431 0.73199394]
 [0.59865848 0.15601864 0.15599452]]
```

**原理**：`rand()` 生成 [0, 1) 区间的均匀分布随机数。每个数在 0 到 1 之间出现的概率相同。

### 随机整数

```python
np.random.seed(42)
arr = np.random.randint(0, 10, (3, 3))
print(arr)
```

**结果**：

```
[[6 3 7]
 [4 6 9]
 [2 6 7]]
```

**参数说明**：

- `0`：最小值（包含）
- `10`：最大值（不包含）
- `(3, 3)`：数组形状

**结果范围**：0, 1, 2, ..., 9（不包含 10）

### 正态分布

```python
# 标准正态分布 (均值=0, 标准差=1)
arr = np.random.randn(5)
print(arr)
```

**结果示例**：`[-0.13826344  0.6536186   0.8644362  -0.74216502  2.26975462]`

**原理**：正态分布（高斯分布）是自然界最常见的分布，如人的身高、考试成绩等。大部分值集中在均值附近，离均值越远，出现概率越低。

```python
# 指定均值和标准差
arr = np.random.normal(loc=100, scale=15, size=5)
print(arr)
```

**结果示例**：`[98.2  115.3  107.8  89.5  102.1]`

**应用场景**：模拟 IQ 分数（均值 100，标准差 15）

## 随机函数对比

| 函数                 | 分布             | 范围                   |
| -------------------- | ---------------- | ---------------------- |
| `rand()`             | 均匀分布         | [0, 1)                 |
| `random()`           | 均匀分布         | [0, 1)                 |
| `randint(low, high)` | 均匀分布（整数） | [low, high)            |
| `randn()`            | 标准正态分布     | (-∞, +∞)               |
| `normal(loc, scale)` | 正态分布         | 均值 loc，标准差 scale |

## 小结

1. **从已有数据创建**：`np.array()` — 把列表转成数组
2. **创建特殊数组**：`zeros`、`ones`、`eye`、`full` — 初始化用
3. **创建序列**：`arange`（指定步长）、`linspace`（指定个数）
4. **创建随机数组**：`rand`、`randint`、`randn` — 模拟和测试用

## 练习

运行代码文件查看完整演示：

```bash
python Basic/Numpy/02_creation.py
```

**练习题**：

1. 创建一个 5x5 的单位矩阵
2. 创建一个 0 到 100 之间（包含 100）的 11 个等间距整数
3. 创建一个 3x4 的随机整数矩阵，值范围在 1-6（模拟掷骰子）
