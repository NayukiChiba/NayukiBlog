---
interface Props {
    title: string;
    formattedDate: string;
    description?: string;
    tags?: string[];
}

const { title, formattedDate, description, tags } = Astro.props;
---

<header class="post-header">
    <div class="meta">
        <span class="date">{formattedDate}</span>
    </div>
    <h1 class="page-title">{title}</h1>
    {
        description && (
            <div class="description-card">
                <span class="description-label">简介</span>
                <div class="description-content" data-text={description} />
            </div>
        )
    }
    {
        tags && (
            <div class="tags">
                {tags.map((tag: string) => {
                    const cleanTag = String(tag).replace(/[\[\]"']/g, "");
                    return <span class="tag">{cleanTag}</span>;
                })}
            </div>
        )
    }
</header>

<style is:global>
    .post-header {
        margin-bottom: 1.5rem;
    }

    .meta {
        margin-bottom: 0.5rem;
    }

    .meta .date {
        display: inline-block;
        font-size: 0.8rem;
        color: #999;
        font-weight: 500;
        letter-spacing: 0.02em;
        text-transform: uppercase;
    }

    .tags {
        margin-top: 1rem;
        display: flex;
        gap: 0.5rem;
        flex-wrap: wrap;
    }

    .tag {
        font-size: 0.75rem;
        color: #555;
        background: rgba(0, 0, 0, 0.05);
        padding: 0.2rem 0.6rem;
        border-radius: 99px;
        transition: background 0.2s;
        font-style: normal;
        font-weight: normal;
        font-family: inherit;
    }

    .tag:hover {
        background: rgba(0, 0, 0, 0.08);
    }

    /* 简介卡片样式 */
    .description-card {
        margin-bottom: 1rem;
        font-size: 0.95rem;
        width: 100%;
        background-color: #f8f9fa;
        border-radius: 16px;
        padding: 1.5rem;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
        overflow: hidden;
        position: relative;
    }

    /* 装饰性引号 */
    .description-card::after {
        content: "!";
        font-family: serif;
        font-size: 6rem;
        color: var(--primary-color);
        opacity: 0.1;
        position: absolute;
        bottom: -1rem;
        right: 1rem;
        line-height: 1;
        pointer-events: none;
    }

    .description-label {
        font-weight: 600;
        color: #000;
        margin-right: 0.8rem;
        padding-right: 0.8rem;
        border-right: 2px solid #e1e4e8;
        float: left;
        user-select: none;
        line-height: 1.6;
    }

    .description-content {
        display: inline;
        line-height: 1.6;
        color: #1a1a1a;
    }
</style>
