---
interface Props {
  title: string;
  formattedDate: string;
  description?: string;
  tags?: string[];
}

const { title, formattedDate, description, tags } = Astro.props;
---

<header class="post-header">
  <div class="meta">
    <span class="date">{formattedDate}</span>
  </div>
  <h1 class="page-title">{title}</h1>
  {
    description && (
      <div class="description-card">
        <span class="description-label">简介</span>
        <div class="description-content" data-text={description} />
      </div>
    )
  }
  {
    tags && (
      <div class="tags">
        {tags.map((tag: string) => {
          const cleanTag = String(tag).replace(/[\[\]"']/g, "");
          return <span class="tag">{cleanTag}</span>;
        })}
      </div>
    )
  }
</header>

<style is:global>
  .post-header {
    margin-bottom: 1.5rem;
  }

  .meta {
    margin-bottom: 0.5rem;
  }

  .meta .date {
    display: inline-block;
    font-size: 0.8rem;
    color: #999;
    font-weight: 500;
    letter-spacing: 0.02em;
    text-transform: uppercase;
  }

  .tags {
    margin-top: 1rem;
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
  }

  .tag {
    font-size: 0.75rem;
    color: #555;
    background: rgba(0, 0, 0, 0.05);
    padding: 0.2rem 0.6rem;
    border-radius: 99px;
    transition: background 0.2s;
    font-style: normal;
    font-weight: normal;
    font-family: inherit;
  }

  .tag:hover {
    background: rgba(0, 0, 0, 0.08);
  }

  /* 简介卡片样式 - 简化版 */
  .description-card {
    margin-bottom: 2rem;
    padding: 1rem 1.2rem;
    background-color: var(
      --color-bg-secondary
    ); /* use variable if available or fallback */
    background-color: rgba(0, 0, 0, 0.02);
    border-radius: 8px;
    border-left: 4px solid var(--primary-color, #3498db);
    display: flex;
    align-items: baseline;
    line-height: 1.6;
  }

  /* 移除大引号 */
  .description-card::after {
    content: none;
  }

  .description-label {
    font-weight: 700;
    color: var(--primary-color, #3498db);
    margin-right: 1rem;
    padding-right: 0;
    border-right: none;
    flex-shrink: 0;
    font-size: 0.95rem;
  }

  .description-content {
    color: #4a4a4a;
    font-size: 0.95rem;
    font-style: italic;
  }
</style>
